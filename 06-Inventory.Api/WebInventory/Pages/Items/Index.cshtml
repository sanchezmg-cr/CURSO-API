@page
@model WebInventory.Pages.Items.IndexModel
@{
    ViewData["Title"] = Model.SharedLabelsLocalizer["Items"];
}

<!-- begin:: Subheader -->
<div class="kt-subheader   kt-grid__item" id="kt_subheader">
    <div class="kt-container  kt-container--fluid ">
        <div class="kt-subheader__main">
            <h3 class="kt-subheader__title">
                @Model.SharedLabelsLocalizer["Maintenances"]
            </h3>
            <span class="kt-subheader__separator kt-hidden"></span>
            <div class="kt-subheader__breadcrumbs">
                <a href="#" class="kt-subheader__breadcrumbs-home"><i class="flaticon2-shelter"></i></a>
                <span class="kt-subheader__breadcrumbs-separator"></span>
                <a href="" class="kt-subheader__breadcrumbs-link">
                    @Model.SharedLabelsLocalizer["Items"]
                </a>
            </div>
        </div>

         <div class="kt-subheader__toolbar">
            <div class="kt-subheader__wrapper">
            </div>
        </div>
    </div>
</div>

<div class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid">
    <!-- begin:: Content -->
    <div class="kt-portlet kt-portlet--mobile kt-portlet--height-fluid">
        <!--begin::Portlet-->
        <!--begin::Head-->
        <div class="kt-portlet__head">
            <div class="kt-portlet__head-label">
                <h3 class="kt-portlet__head-title">
                    @Model.SharedLabelsLocalizer["Items"]
                </h3>
            </div>
            <div class="kt-portlet__head-toolbar">
                <div class="kt-portlet__head-actions">
                    @*@if (Model.ValidateFunctionalityAccessPolicy(NovusWebHelpers.Constants.SecurityConstants.FunctionalitiesConstants.General.Maintenances.MT_FORMS, NovusWebHelpers.Constants.SecurityConstants.ActionOptions.View))
                    {*@
                        <div class="btn-container-tooltip">
                            <a id="detailsButton" class="btn btn-mnt-circle btn-elevate btn-icon btn-circle" asp-page="Details" asp-route-code="code" data-dynamic-parameters="code"><i class="fa fa-eye"></i></a>
                            <div id="detailsButtonTooltip"><h6>@Model.SharedLabelsLocalizer["DetailsButton"]</h6></div>
                        </div>
@*                  }
                    @if (Model.ValidateFunctionalityAccessPolicy(NovusWebHelpers.Constants.SecurityConstants.FunctionalitiesConstants.General.Maintenances.MT_FORMS, NovusWebHelpers.Constants.SecurityConstants.ActionOptions.Add))
                    {
*@                        <div class="btn-container-tooltip">
                            <a id="addButton" class="btn btn-mnt-circle btn-elevate btn-icon btn-circle" asp-page="Create"><i class="fa fa-plus"></i></a>
                            <div id="addButtonTooltip"><h6>@Model.SharedLabelsLocalizer["AddButton"]</h6></div>
                        </div>
  @*                 }
                    @if (Model.ValidateFunctionalityAccessPolicy(NovusWebHelpers.Constants.SecurityConstants.FunctionalitiesConstants.General.Maintenances.MT_FORMS, NovusWebHelpers.Constants.SecurityConstants.ActionOptions.Edit))
                    {
  *@                      <div class="btn-container-tooltip">
                            <a id="editButton" class="btn btn-mnt-circle btn-elevate btn-icon btn-circle" asp-page="Edit" asp-route-code="code" data-dynamic-parameters="code" data-original-title="Editar"><i class="fa fa-edit"></i></a>
                            <div id="editButtonTooltip"><h6>@Model.SharedLabelsLocalizer["EditButton"]</h6></div>
                        </div>
    @*                }
                    @if (Model.ValidateFunctionalityAccessPolicy(NovusWebHelpers.Constants.SecurityConstants.FunctionalitiesConstants.General.Maintenances.MT_FORMS, NovusWebHelpers.Constants.SecurityConstants.ActionOptions.Delete))
                    {
    *@                    <div class="btn-container-tooltip">
@*                            <a id="deleteButton" class="btn btn-mnt-circle btn-elevate btn-icon btn-circle" asp-page="Delete" asp-route-code="code" data-dynamic-parameters="code" data-original-title="Eliminar"><i class="fa fa-trash"></i></a>
                            <div id="deleteButtonTooltip"><h6>@Model.SharedLabelsLocalizer["DeleteButton"]</h6></div>
*@                        </div>
@*                    }*@


                    <div class="dropdown dropdown-inline">
                        <button id="optionsButton" type="button" class="btn btn-mnt-circle btn-elevate btn-circle btn-icon" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" dat-placement="top" title="@Model.SharedLabelsLocalizer["OptionsGridButton"]" data-original-title="@Model.SharedLabelsLocalizer["OptionsGridButton"]">
                            <i class="fa fa-ellipsis-v"></i>
                        </button>
                        <div class="dropdown-menu dropdown-menu-fit dropdown-menu-xs dropdown-menu-right" aria-labelledby="dropdownMenuButton" style="">
                            <!--begin::Nav-->
                            <ul class="kt-nav">
                                <li class="kt-nav__head">
                                    @Model.SharedLabelsLocalizer["OptionsGridButton"]:
                                </li>
                                <li class="kt-nav__separator"></li>
                                <li class="kt-nav__item">
                                    <a class="kt-nav__link" onclick="AddFilterRow('mainGridContainer')">
                                        <i class="kt-nav__link-icon fa fa-filter"></i>
                                        <span class="kt-nav__link-text">@Model.SharedLabelsLocalizer["FilterButton"]</span>
                                    </a>
                                </li>
                                <li class="kt-nav__item">
                                    <a class="kt-nav__link" onclick="AddSearchInput('mainGridContainer')">
                                        <i class="kt-nav__link-icon fa fa-search"></i>
                                        <span class="kt-nav__link-text">@Model.SharedLabelsLocalizer["SearchButton"]</span>
                                    </a>
                                </li>
                            </ul>

                            <!--end::Nav-->
                        </div>
                        <div id="optionsButtonTooltip"><h6>@Model.SharedLabelsLocalizer["OptionsGridButton"]</h6></div>
                    </div>
                </div>
            </div>
        </div>
        <!--end::head-->

        <div class="kt-portlet__body">
            <div class="mt-2" id="itemsGrid"></div>
        </div>
        <!--end::Portlet-->
    </div>
</div>

<!--inicio::JS Code-->
@section Scripts{
    <script>
        LoadControls();
        DevExpress.localization.locale("es");

        function LoadControls() {
            var dataSource = ParseDataSourceToJson(@Html.Raw(Model.DataSource));

            //Begin::Recuperación de datos y creación del grid
            var dataOptions = {
                dataSource: dataSource,

                columns: [
                    {
                        dataField:"code",
                        caption: "Codigo",
                        width: 150,
                    },
                    {
                        dataField: "description",
                        caption: "Descripcion",
                    },
                ]
            };
                $("#itemsGrid").dxDataGrid($.extend(dataOptions, GetGridBasicFormatOptions()));
            //End::Fin de recuperación de datos y creación del grid


            $("#detailsButtonTooltip").dxTooltip({
                target: "#detailsButton",
                showEvent: "mouseenter",
                hideEvent: "mouseleave",
                position: "top",
                closeOnOutsideClick: false
            });
            $("#addButtonTooltip").dxTooltip({
                target: "#addButton",
                showEvent: "mouseenter",
                hideEvent: "mouseleave",
                position: "top",
                closeOnOutsideClick: false
            });
            $("#editButtonTooltip").dxTooltip({
                target: "#editButton",
                showEvent: "mouseenter",
                hideEvent: "mouseleave",
                position: "top",
                closeOnOutsideClick: false
            });
            $("#deleteButtonTooltip").dxTooltip({
                target: "#deleteButton",
                showEvent: "mouseenter",
                hideEvent: "mouseleave",
                position: "top",
                closeOnOutsideClick: false
            });
            $("#optionsButtonTooltip").dxTooltip({
                target: "#optionsButton",
                showEvent: "mouseenter",
                hideEvent: "mouseleave",
                position: "top",
                closeOnOutsideClick: false
            });
        }

    </script>
}
<!--end::JS Code-->
